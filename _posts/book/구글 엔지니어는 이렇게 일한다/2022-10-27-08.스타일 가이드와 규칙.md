---
title: 08. 스타일 가이드와 규칙
date: 2022-10-27 23:21:04 +0900
categories: [BOOK, 구글 엔지니어는 이렇게 일한다]
tags: [software_engineering]  # TAG는 반드시 소문자로 이루어져야함!
---

대부분 엔지니어링 조직에는 내부 코드베이스를 관리하는 규칙이 있다. 예) 소스코드를 저장하는 위치, 코드 포맷팅, 명명 방식, 패턴, 예외와 스레드 사용법 등을 규정한다. 규칙은 제안이나 권장사항이 아닌 엄격하고 꼭 지켜야하는 법이다. 한편 지침은 권장사항과 모범 사례를 말한다.

구글에는 코딩할 때 따라야하는 규칙들을 모아서 `프로그래밍 스타일 가이드`로 정리해 표준으로 삼았다. 이 스타일 가이드는 구글의 코드를 지배하는 종합적인 규약 모음집이다.

## 8.1 규칙이 필요한 이유
규칙을 관리하는 목표는 좋은 행동을 장려하고 나쁜 행동을 억제하기 위함이다. 좋은, 나쁜의 해석은 관심사가 다르기 때문에 조직마다 차이가 있다.

가장 먼저 조직이 추구하는 가치를 파악해야 한다. 무엇을 장려하거나 억제할지를 규정하는 규칙과 지침은 그 가치를 기준으로 정해진다.

확립된 규칙과 지침은 조직이 커지더라도 일관되게 통용되는 공통의 코딩 어휘가 되어 준다. 어휘가 통일되면 엔지니어들은 코드를 표현하는 형식보다 코드에 담을 내용에 집중할 수 있다.

## 8.2 규칙 만들기
규칙을 정의할 때는 어떤 `목표`를 이루려하는지에 집중해야 한다.

### 8.2.1 기본 원칙 안내
규칙을 만들 때 염두에 두어야 하는 중요한 원칙들은 다음과 같다.
* 규칙의 양을 최소화 한다
* 코드를 읽는 사람에게 맞춘다.
* 일관되어야 한다.
* 오류가 나기 쉽거나 예상치 못한 동작을 유발하는 구조를 피한다.
* 꼭 필요하다면 실용성을 생각해 예외를 허용한다.

__1)규칙의 양을 최소화 한다__

조직 내 모든 엔지니어가 새로운 규칙들을 익히고 적응하는 데는 비용이 든다. 규칙이 너무 많다면 엔지니어들이 다 기억하지도 못 할 것이고 새로 합류한 엔지니어가 적응하기도 어렵다.

__2)읽는 사람에게 맞춘다__

코드 작성자보다 읽는 사람에 최적화해야 한다. 작성되는 횟수보다 읽히는 횟수가 더 많으며 시간이 지날수록 차이가 벌어진다. 따라서 읽기 난해한 것보다 타이핑하기 지루한 편이 낫다. 독자 중심주의의 일환으로 구글은 엔지니어가 의도한 행위를 분명하게 알려주는 증거를 코드에 남기라고 요구한다.

__3)일관되어야 한다__

__4)일관성이 안겨주는 이점__

코드베이스의 스타일과 기준이 일관되면 코드를 작성하는 엔지니어와 읽는 이들은 어떻게 표현하느냐가 아닌 무엇을 수행하느냐에 집중할 수 있다. 또 일관성은 규모를 확장하기 쉽게 도와준다. 조직 확장에는 도구 활용이 핵심이며 코드가 일관되면 코드를 이해하고 수정하고 생성하는 도구를 더 쉽게 만들 수 있다.

그리고 조직이 성장하면서 같은 코드베이스를 공유하는 엔지니어의 수도 늘어나는데 이때 코드를 가능한한 일관성 있게 관리하면 엔지니어들이 새로운 팀으로 옮겨 적응 하는 시간이 단축된다. 그 결과로 조직의 필요에 맞게 인력을 유연하게 재배치할 수 있다. 또 시간이 흐르면서 엔지니어 일부가 프로젝트를 떠나고 새로운 인력이 합류하게 되도 코드가 일관성이 있으면 이런 전환 비용이 낮아지고 코드와 엔지니어 모두 거의 제약 없이 재배치될 수 있다.

__5)표준 정하기__

스타일 가이드는 과학적이고 기술적인 선택보다 지역적인 규약에 따르라고 명시한 규칙이 많다. 해당 영역에서의 일관성을 더 중요하게 생각하기 때문이다.

일반적으로 규약은 바깥세상과 일관되게 잡는 편이 유리하다. 작고 독립적이고 수명이 짧은 코드라면 내부의 일관성이 중요하고, 수명이 길고 확장될 가능성이 큰 코드라면 널리 쓰이는 표준을 따르는 게 유리하다.

__6)오류를 내기 쉽거나 예상과 다르게 동작할 여지가 있는 구조는 피하자__

복잡한 기능에는 미묘한 함정이 숨어있는 경우가 많다. 따라서 정확하게 이해하지 못한 채 사용하면 그 복잡성 때문에 오용하여 버그를 유발하기 쉽다. 심지어 정확히 이해하고 사용했다고 해도 나중에 합류한 팀원이나 유지보수를 맡은 엔지니어도 같은 수준으로 이해할지는 보장할 수 없다.

이로 인해 구글의 파이썬 스타일 가이드에서는 리플렉션 등 몇가지 고급 기능을 사용하지 못하게 제한하고 있다.

__7)실용적 측면을 인정하자__

스타일 가이드의 규칙들에 때로는 예외가 필요하다는 것을 잘 알고 있다. 따라서 꼭 필요하다면 최적화나 실용성을 위해 예외를 허용한다.
