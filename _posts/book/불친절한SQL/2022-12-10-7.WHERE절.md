---
title: 7. WHERE 절
date: 2022-12-10 22:10:43 +0900
categories: [BOOK, 불친절한 SQL 프로그래밍]
tags: [sql]  # TAG는 반드시 소문자로 이루어져야함!
---

WHERE 절을 사용하면 행을 선택하여 조회할 수 있다. WHERE 절은 FROM 절 다음에 기술하고, FROM 절이 수행된 후 수행된다. WHERE 절에서 조건은 행마다 평가되며 TRUE, FALSE, UNKOWN 중 하나의 값을 반환한다. 그리고 SELECT 문은 평가 결과가 TRUE인 행만 반환한다.

## 7.1 비교 조건
| 비교 조건     | 설명        |
|-----------|-----------|
| =         | 같음        |
| 		&gt;    | 큼         |
| 		&gt;=   | 크거나 같음    |
| <>,!=,^=  | 다름        |
| <         | 작음        |
| <=        | 작거나 같음    |
| ALL       | 목록 전체를 비교 |
| ANY, SOME | 목록 일부를 비교 |

비교 조건은 데이터 타입이 동일한 값을 비교해야 한다. 데이터 타입이 다르면 암시적 데이터 변환이 발생한다.

## 7.2 논리 조건
논리 조건으로 조건을 결합하거나 부정할 수 있다.
* AND - 조건이 모두 true인 경우 true이다.
* OR - 조건이 하나라도 true인 경우 true이다.
* NOT - true -> false, false -> true 로 조건을 부정한다.

## 7.3 BETWEEN 조건
`expr1 [NOT] BETWEEN expr2 AND expr3` expr1이 expr2와 expr3의 범위에 해당하는 행을 반환한다.

```
SELECT enamd, sal
FROM emp
WHERE sal BETWEEN 2500 AND 3000; -- sal >= 2500 AND sal <= 3000
```

## 7.4 IN 조건
`expr1 [NOT] IN (expr2 [, expr2])` expr1이 expr2의 목록에 포함되는 행을 반환한다.

```
SELECT ename, job
FROM emp
WHERE job IN ('ANALYST', 'MANAGER'); -- job = 'ANALYST' OR job = 'MANAGER'

-- 아래와 같이 다중 열을 사용할 수도 있다.
SELECT ename, deptno, job
FROM emp
WHERE (deptno, job) IN ((10, 'MANAGER'), (20, 'ANALYST'));

-- NOT IN 조건은 AND 조건으로 평가된다.
SELECT ename, job
FROM emp
WHERE job NOT IN ('ANALYST', 'MANAGER'); -- job != 'ANALYST' AND job != 'MANAGER'
```

## 7.5 LIKE 조건
`char [NOT] LIKE char2 [ESCAPE esc_char]` char1이  char2패턴과 일치하는 행을 반환한다. char2에는 아래의 특수문자를 사용할 수 있다.
* % : 0개 이상의 문자와 일치
* _ : 하나의 문자와 일치

```
-- A로 시작하는 행 조회
SELECT ename
FROM emp
WHERE ename LIKE 'A%';

-- A로 시작하고 S로 끝나는 행 조회
SELECT ename
FROM emp
WHERE ename LIKE 'A%S';

-- ON이 포함된 행 조회
SELECT ename
FROM emp
WHERE ename LIKE '%ON%';

-- ename의 세 번째 문자가 M이고 길이가 5자리인 행 조회
SELECT ename
FROM emp
WHERE ename LIKE '__M__;

-- A가 포함되지 않은 행 조회
SELECT ename
FROM emp
WHERE ename NOT LIKE '%A%';

-- 특수문자를 검색할 경우 ESCAPE 문자를 사용할 수 있다.
SELECT c1
FROM w1
WHERE c1 LIKE '_\%_' ESCAPE '\';
```
