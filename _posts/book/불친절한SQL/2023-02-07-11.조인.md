---
title: 11. 조인
date: 2023-02-07 23:02:37 +0900
categories: [BOOK, 불친절한 SQL 프로그래밍]
tags: [sql]  # TAG는 반드시 소문자로 이루어져야함!
---

조인을 사용하면 하나의 쿼리로 다수의 테이블을 조회할 수 있다. 조인은 열 값으로 테이블 행을 연결한다.

```
SELECT a.deptno, a.dname, b.empno, b.ename
FROM dept a, emp b
WHERE b.deptno = a.deptno
ORDER BY 1, 3;
```

## 11.1 기본 원리
### 11.1.1 조인 조건
일반 조건이 열과 값을 평가하는 반면, 조인 조건은 열과 열을 평가한다. 조인은 조인 조건에 따라 카티션 곱, 등가 조인, 비등가 조인으로 구분할 수 있다.

#### 카티션 곱
카티션 곱은 __조인 조건이 없는 조인__ 이다. 카티션 곱이 발생하면 조인되는 테이블 행의 곱만큼 행이 반환된다.

<img src="/assets/img/posting_img/book/불친절한SQL/카티션곱.jpeg" width="700px">

카티션 곱은 조인 조건이 없으므로 평가 결과가 항상 TRUE 이다.

#### 등가 조인
등가 조인은 조인 조건이 모두 등호(=)인 조인이다. 값이 동일한 경우에만 행이 반환된다. (inner join) 조인되는 테이블의 갯수가 n개라면, 테이블 간의 조인 조건은 최소 n-1개가 되어야 한다.

```
SELECT a.c1, b.c1
FROM t1 a, t2 b
WHERE b.c1 = a.c1;
```

#### 비등가 조인
비등가 조인은 등호 외에 다른 조인 조건이 있는 조인이다.

```
SELECT a.c1, b.c1
FROM t1 a, t2 b
WHERE b.c1 >= a.c1;
```

### 11.1.2 조인 범위
조인 범위는 inner, outer로 구분할 수 있다.

<img src="/assets/img/posting_img/book/불친절한SQL/조인범위.jpeg" width="700px">

#### inner join
이너 조인은 조인이 성공한 범위를 반환한다. NVL을 사용해서 널을 포함한 조인을 수행할 수 있고, IS NULL 조건을 사용할 수도 있다.

```
SELECT ...
FROM t1 a, t2 b
WHERE b.c1 = a.c1
AND b.c2 = a.c2
AND b.c3 = a.c3;
```

#### outer join
아우터 조인은 이너와 아우터를 함께 반환한다.

<img src="/assets/img/posting_img/book/불친절한SQL/아우터조인.jpeg" width="700px">

```
# 아우터 기준 반대쪽에 (+) 기호를 기술한다.
SELECT ...
FROM t1 a, t2 b
WHERE b.c1(+) = a.c1;
```

232~240p

### 11.1.3 조인 차수
조인 차수는 조인되는 테이블의 차수를 의미한다.

예) t1, t2가 1:M 관계라면 조인 차수는 1:M이다.

<img src="/assets/img/posting_img/book/불친절한SQL/1대M조인.jpeg" width="700px">

등가 조인시 관계 차수가 1:M이고 M쪽의 PK가 모두 등호로 입력되면 조인 차수는 1:1이 된다.
