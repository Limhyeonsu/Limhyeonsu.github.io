<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="JPA 잠금 기법" /><meta property="og:locale" content="en" /><meta name="description" content="01. 동시 접근과 잠금 [동시 접근을 올바르게 처리하지 않을 대 발생하는 데이터 불일치 문제]" /><meta property="og:description" content="01. 동시 접근과 잠금 [동시 접근을 올바르게 처리하지 않을 대 발생하는 데이터 불일치 문제]" /><link rel="canonical" href="https://limhyeonsu.github.io/posts/19.JPA-%EC%9E%A0%EA%B8%88-%EA%B8%B0%EB%B2%95/" /><meta property="og:url" content="https://limhyeonsu.github.io/posts/19.JPA-%EC%9E%A0%EA%B8%88-%EA%B8%B0%EB%B2%95/" /><meta property="og:site_name" content="Hyeonsu Lim" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-01-30T21:08:21+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="JPA 잠금 기법" /><meta name="twitter:site" content="@imhyeon99494867" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-01-30T21:08:21+09:00","datePublished":"2023-01-30T21:08:21+09:00","description":"01. 동시 접근과 잠금 [동시 접근을 올바르게 처리하지 않을 대 발생하는 데이터 불일치 문제]","headline":"JPA 잠금 기법","mainEntityOfPage":{"@type":"WebPage","@id":"https://limhyeonsu.github.io/posts/19.JPA-%EC%9E%A0%EA%B8%88-%EA%B8%B0%EB%B2%95/"},"url":"https://limhyeonsu.github.io/posts/19.JPA-%EC%9E%A0%EA%B8%88-%EA%B8%B0%EB%B2%95/"}</script><title>19. JPA 잠금 기법 | Hyeonsu Lim</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Hyeonsu Lim"><meta name="application-name" content="Hyeonsu Lim"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/profile_img.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Hyeonsu Lim</a></div><div class="site-subtitle font-italic">Developer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/Limhyeonsu" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/imhyeon99494867" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['gustn72096','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>19. JPA 잠금 기법</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>19. JPA 잠금 기법</h1><div class="post-meta text-muted"><div> By <em> <a href="https://twitter.com/imhyeon99494867">Lim Hyeonsu</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1675080501" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2023-01-30 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1161 words"> <em>6 min</em> read</span></div></div></div><div class="post-content"><h2 id="01-동시-접근과-잠금"><span class="mr-2">01. 동시 접근과 잠금</span><a href="#01-동시-접근과-잠금" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>[동시 접근을 올바르게 처리하지 않을 대 발생하는 데이터 불일치 문제]</p><p><img data-src="/assets/img/posting_img/book/JPA%20프로그래밍%20입문/동시접근_데이터불일치.jpeg" width="700px" data-proofer-ignore></p><p>위 그림을 보면 인출과 입금 이후에 실제 잔고는 800원이어야 하는데 남은 잔고는 500원이 된다.</p><p>이렇게 동시성 접근 문제를 막기 위한 가장 쉬운 방법은 DB 트랜잭션 격리 수준을 높이는 것이다. 단, 트랜잭션 격리 수준을 높이면 동시 사용자가 많은 온라인 서비스에서는 전체 성능을 떨어뜨리기 때문에 동시 접근을 처리하기 위한 올바른 방법이 아니다.</p><p>트랜잭션 격리 수준을 높이는 대신 동시 접근을 처리할 수 있는 다른 방법으로는 <strong>잠금 기법</strong> 을 사용하는 것이다. 잠금 기법에는 먼저 데이터에 접근한 트랜잭션이 우선순위를 갖는 선점 잠금 방식과 먼저 데이터를 수정한 트랜잭션이 우선순위를 갖는 비선점 잠금 방식이 존재한다.</p><h2 id="02-선점-잠금pessimistic-lock"><span class="mr-2">02. 선점 잠금(pessimistic lock)</span><a href="#02-선점-잠금pessimistic-lock" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>선점 잠금은 먼저 데이터에 접근한 트랜잭션이 우선순위를 갖는 잠금 방식이다.</p><p><img data-src="/assets/img/posting_img/book/JPA%20프로그래밍%20입문/선점잠금동작방식.jpeg" width="700px" data-proofer-ignore></p><p>선점 잠금을 사용하면 서로 다른 두 트랜잭션이 동시에 동일 데이터에 접근하여 수정하는 것을 방지할 수 있고, 동시 접근으로 데이터 일관성이 깨지는 것을 막아준다. JPA에서 선점 잠금을 사용하려면 find() 메서드의 세 번째 인자로 <code class="language-plaintext highlighter-rouge">LockModeType.PESSIMISTIC_WRITE</code>를 값으로 전달하면 된다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DepositService</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">deposit</span><span class="o">(</span><span class="nc">String</span> <span class="n">accountNum</span><span class="o">,</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">EntityManager</span> <span class="n">em</span> <span class="o">=</span> <span class="no">EMF</span><span class="o">.</span><span class="na">currentEntityManager</span><span class="o">();</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">em</span><span class="o">.</span><span class="na">getTransaction</span><span class="o">().</span><span class="na">begin</span><span class="o">();</span>
      <span class="c1">//LockModeType.PESSIMISTIC_WRITE를 사용하면 하이버네이트는 DBMS의 잠금 쿼리를 사용해서 행 단위 잠금을 사용한다.</span>
      <span class="nc">Account</span> <span class="n">account</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Account</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">accountNum</span><span class="o">,</span> <span class="nc">LockModeType</span><span class="o">.</span><span class="na">PESSIMISTIC_WRITE</span><span class="o">);</span>
      <span class="k">if</span><span class="o">(</span><span class="n">account</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">AccountNotFoundException</span><span class="o">();</span>
      <span class="o">}</span>
      <span class="n">account</span><span class="o">.</span><span class="na">deposit</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
      <span class="n">em</span><span class="o">.</span><span class="na">getTransacion</span><span class="o">().</span><span class="na">commit</span><span class="o">();</span>

      <span class="k">return</span> <span class="n">account</span><span class="o">.</span><span class="na">Balance</span><span class="o">();</span>

    <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">em</span><span class="o">.</span><span class="na">getTransacion</span><span class="o">().</span><span class="na">rollback</span><span class="o">();</span>
      <span class="k">throw</span> <span class="n">ex</span><span class="o">;</span>
    <span class="o">}</span><span class="k">finally</span> <span class="o">{</span>
      <span class="n">em</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>한 트랜잭션이 식별자가 “02-001”인 Account 엔티티를 LockModeType.PESSIMISTIC_WRITE를 이용해서 구현했다면, 이 트랜잭션의 잠금이 해제될 때까지 “02-001” Account 엔티티에 대한 선점 잠금을 구하지 못하고 블록킹 된다.</p><p>선점 잠금을 사용할 때 주의사항으로는 <strong>교착 상태</strong> 에 빠질 수 있다는 것이다. 선점 잠금으로 인해 트랜잭션이 교착상태에 빠지는 상황을 방지하려면 짐금 대기 시간을 힌트로 설정하면 된다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">hints</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="c1">//DBMS에 따라 잠금 대기시간지 적용되지 않을 수 있다.</span>
<span class="n">hints</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"javax.persistence.lock.timeout"</span><span class="o">,</span> <span class="mi">1000</span><span class="o">);</span>
<span class="nc">Account</span> <span class="n">account</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Account</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">accountNum</span><span class="o">,</span> <span class="nc">LockModeType</span><span class="o">.</span><span class="na">PESSIMISTIC_WRITE</span><span class="o">,</span> <span class="n">hints</span><span class="o">);</span>
</pre></table></code></div></div><h2 id="03-비선점-잠금optimistic-lock"><span class="mr-2">03. 비선점 잠금(optimistic lock)</span><a href="#03-비선점-잠금optimistic-lock" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>비선점 잠금 방식은 먼저 데이터를 수정한 트랜잭션이 우선순위를 갖는다.</p><p><img data-src="/assets/img/posting_img/book/JPA%20프로그래밍%20입문/비선점잠금동작방식.jpeg" width="700px" data-proofer-ignore></p><p>비선점 잠금 방식을 사용하려면 버전 값을 저장할 컬럼이 필요하다. JPA는 엔티티를 조회할 때 버전 값을 함께 조회한다. 그리고 엔티티의 데이터가 바뀌면 update 쿼리의 비교 조건으로 식별자뿐만 아니라 데이터를 조회한 시점의 버전 값도 함께 사용한다. 그리고 update 쿼리에서 버전을 1 증가 시킨다. 만약 다른 트랜잭션에서 먼저 데이터를 수정하게 되면 버전 값이 일치하지 않아 데이터 수정에 실패한다.</p><p>[JPA에서 비선점 잠금을 사용하기 위한 방법]</p><ul><li>버전 값을 저장할 컬럼 추가(컬럼 타입은 숫자나 시간 타입)<li>버전 컬럼과 매핑할 속성에 @Version 애노테이션을 설정</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Customer</span> <span class="o">{</span>
  <span class="nd">@Id</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">id</span><span class="o">;</span>

  <span class="nd">@Version</span>
  <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">ver</span><span class="o">;</span>

  <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"secret_code"</span><span class="o">)</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">secretCode</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>@Version으로 설정할 수 있는 타입으로는 int, Integer, short, Short, long, Long, Timestamp이다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">em</span><span class="o">.</span><span class="na">getTransaction</span><span class="o">().</span><span class="na">begin</span><span class="o">();</span>
<span class="c1">//select c.id, c.secret_cpde, c.ver from Customer c where c.id=?</span>
<span class="nc">Customer</span> <span class="n">customer</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Customer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>

<span class="n">customer</span><span class="o">.</span><span class="na">changeSecretCode</span><span class="o">(</span><span class="n">newSecCode</span><span class="o">);</span>

<span class="c1">//update Customer set secret_code=?, ver=?, where id=? and ver=?</span>
<span class="n">em</span><span class="o">.</span><span class="na">getTransacion</span><span class="o">().</span><span class="na">commit</span><span class="o">();</span>
</pre></table></code></div></div><p>만약 update 쿼리 실행 결과로 변경된 행의 개수가 0이면, 트랜잭션을 롤백하고 익셉션을 발생한다.</p><p>객체를 생성할 때 버전을 지정하지 않아 ver가 null이면 하이버네이트는 버전 값으로 0을 사용한다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/book/'>BOOK</a>, <a href='/categories/jpa-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%9E%85%EB%AC%B8/'>JPA 프로그래밍 입문</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/jpa/" class="post-tag no-text-decoration" >jpa</a> <a href="/tags/sql/" class="post-tag no-text-decoration" >sql</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=19.+JPA+%EC%9E%A0%EA%B8%88+%EA%B8%B0%EB%B2%95+-+Hyeonsu+Lim&url=https%3A%2F%2Flimhyeonsu.github.io%2Fposts%2F19.JPA-%25EC%259E%25A0%25EA%25B8%2588-%25EA%25B8%25B0%25EB%25B2%2595%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=19.+JPA+%EC%9E%A0%EA%B8%88+%EA%B8%B0%EB%B2%95+-+Hyeonsu+Lim&u=https%3A%2F%2Flimhyeonsu.github.io%2Fposts%2F19.JPA-%25EC%259E%25A0%25EA%25B8%2588-%25EA%25B8%25B0%25EB%25B2%2595%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Flimhyeonsu.github.io%2Fposts%2F19.JPA-%25EC%259E%25A0%25EA%25B8%2588-%25EA%25B8%25B0%25EB%25B2%2595%2F&text=19.+JPA+%EC%9E%A0%EA%B8%88+%EA%B8%B0%EB%B2%95+-+Hyeonsu+Lim" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="Limhyeonsu/Limhyeonsu.github.io" issue-term="pathname" theme="github-dark" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/15.Top-N%EC%BF%BC%EB%A6%AC/">15. Top-N 쿼리</a><li><a href="/posts/09.%EB%A9%B4%EC%A0%91%EB%AC%B8%EC%A0%9C/">09. 면접문제</a><li><a href="/posts/14.%EB%B6%84%EC%84%9D%ED%95%A8%EC%88%98/">14. 분석함수</a><li><a href="/posts/07.%EA%B8%B0%EC%88%A0%EC%A0%81-%EB%AC%B8%EC%A0%9C/">07. 기술적 문제</a><li><a href="/posts/06.bigO/">06. big-O</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/sql/">sql</a> <a class="post-tag" href="/tags/software-engineering/">software_engineering</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/computer/">computer</a> <a class="post-tag" href="/tags/network/">network</a> <a class="post-tag" href="/tags/http/">http</a> <a class="post-tag" href="/tags/infra/">infra</a> <a class="post-tag" href="/tags/tdd/">tdd</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/bufferedreader/">bufferedreader</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/02.JPA-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0/"><div class="card-body"> <em class="timeago small" data-ts="1671108218" > 2022-12-15 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>2. JPA 시작하기</h3><div class="text-muted small"><p> 01. 예제 프로젝트 02. 메이븐 프로젝트 생성 및 이클립스 임포트 03. 데이터베이스 생성 04. 모델 클래스와 매핑 설정 @Entity //1) @Table(name=&quot;user&quot;) //2) public class User { @Id //3) private String email; private String name; //4...</p></div></div></a></div><div class="card"> <a href="/posts/03.%EC%97%94%ED%8B%B0%ED%8B%B0/"><div class="card-body"> <em class="timeago small" data-ts="1671352838" > 2022-12-18 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>3. 엔티티</h3><div class="text-muted small"><p> 01. 엔티티 클래스 JPA에서 엔티티는 영속성을 가진 객체로서 가장 중요한 타입이다. JPA의 엔티티는 DB 테이블에 보관할 대상이 된다. EntityManager를 사용해서 엔티티 단위로 저장하고 조회하고 삭제한다. JPA는 두 가지 방법으로 엔티티를 설정하는데 1)@Entity 애노테이션을 사용하는 방법 2)XML 매핑 설정을 사용하는 방법이 ...</p></div></div></a></div><div class="card"> <a href="/posts/04.%EB%B0%B8%EB%A5%98%EC%99%80-@Embeddable/"><div class="card-body"> <em class="timeago small" data-ts="1671631332" > 2022-12-21 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>4. 밸류와 @Embeddable</h3><div class="text-muted small"><p> 01. 밸류로 의미 더 드러내기 Hotel 클래스는 주소 자체를 의미하는 address 데이터를 갖고 있다. 그리고 Address 클래스는 zipcode, address1, address2를 데이터로 갖고 있어 따로 유추하지 않아도 주소가 우편번호, 주소1, 주소2로 구성된다는 것을 알 수 있다. Address 클래스 같은 타입을 value라고 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/18.-%EA%B8%B0%ED%83%80-%EB%A7%A4%ED%95%91-%EC%84%A4%EC%A0%95/" class="btn btn-outline-primary" prompt="Older"><p>18. 기타 매핑 설정</p></a> <a href="/posts/10.Group-by-%EC%A0%88%EA%B3%BC-having-%EC%A0%88/" class="btn btn-outline-primary" prompt="Newer"><p>10. GROUP BY 절과 HAVING 절</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/imhyeon99494867">Lim Hyeonsu</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/sql/">sql</a> <a class="post-tag" href="/tags/software-engineering/">software_engineering</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/computer/">computer</a> <a class="post-tag" href="/tags/network/">network</a> <a class="post-tag" href="/tags/http/">http</a> <a class="post-tag" href="/tags/infra/">infra</a> <a class="post-tag" href="/tags/tdd/">tdd</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/bufferedreader/">bufferedreader</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
